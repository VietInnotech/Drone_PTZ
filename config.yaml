# Application Configuration
logging:
  log_file: logs/app.log
  log_level: DEBUG
  log_format: "<green>{time:YYYY-MM-DD HH:mm:ss.SSS}</green> | <level>{level: <8}</level> | <cyan>{name}</cyan>:<cyan>{function}</cyan>:<cyan>{line}</cyan> - <level>{message}</level>"
  log_rotation: 5 MB
  log_retention: 30 days
  log_enqueue: true
  log_backtrace: true
  log_diagnose: true
  write_log_file: true
  reset_log_on_start: true

camera:
  # Input source selection: camera | video | webrtc
  # - camera: use local camera_index or rtsp_url
  # - video: uses ptz_simulator.video_source
  # - webrtc: connect to a MediaMTX/WebRTC stream via WHEP or legacy /offer
  source: "webrtc"
  # WebRTC base URL when source=webrtc
  # Examples:
  #   http://<mediamtx-host>:8889/stream            # legacy /offer
  #   http://<mediamtx-host>:8889/stream/whep       # WHEP endpoint
  # The application will try <url>/whep first, then fallback to /offer
  webrtc_url: "http://localhost:8889/camera_1/"
  camera_index: 4
  # RTSP stream URL (optional, priority over camera_index and video_source)
  # Example: rtsp://admin:password@192.168.1.70:554/stream1
  rtsp_url:
  resolution_width: 1280
  resolution_height: 720
  fps: 30
  credentials_ip: 192.168.1.123
  credentials_user: admin
  credentials_password: "!Inf2019"

detection:
  confidence_threshold: 0.35
  model_path: assets/models/yolo/best5.pt
  target_labels:
    - drone
    - UAV

ptz:
  ptz_movement_gain: 0.25
  ptz_movement_threshold: 0.025
  zoom_target_coverage: 0.1
  zoom_reset_timeout: 2.0
  zoom_min_interval: 0.1
  zoom_velocity_gain: 2.0
  zoom_reset_velocity: 0.5
  ptz_ramp_rate: 0.1
  no_detection_home_timeout: 5
  pid_kp: 2.0
  pid_ki: 0.15
  pid_kd: 0.8
  pid_integral_limit: 1.0
  pid_dead_band: 0.01
  control_mode: onvif

performance:
  fps_window_size: 30
  zoom_dead_zone: 0.03
  frame_queue_maxsize: 1

octagon:
  ip: 192.168.1.122
  user: admin
  password: "!Inf2019"

# Octagon device IDs (suffix per device instance)
# Example: 'visible1' requires calling /api/devices/visible1/position
octagon_devices:
  pantilt_id: pantilt
  visible_id: visible1

simulator:
  use_ptz_simulation: false
  video_source: assets/videos/V_DRONE_048.mp4
  video_loop: false
  sim_viewport: true
  sim_pan_step: 0.1
  sim_tilt_step: 0.1
  sim_zoom_step: 0.1
  sim_zoom_min_scale: 0.3
  sim_draw_original_viewport_box: true

tracking:
  # Ultralytics YOLO Tracker Selection
  # Options: bytetrack, botsort
  tracker_type: bytetrack
